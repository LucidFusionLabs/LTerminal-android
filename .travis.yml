language: android
jdk: oraclejdk8

android:
  components:
    - platform-tools
    - tools
    - build-tools-23.0.3
    - android-23

addons:
  apt:
    sources:
      - george-edison55-precise-backports
      - ubuntu-toolchain-r-test
    packages:
      - cmake
      - cmake-data
      - gcc-4.8
      - g++-4.8

before_install:
  - echo $TRAVIS_OS_NAME
  - echo ${HOME}
  - echo ${TRAVIS_BUILD_DIR}

before_script:
  - mkdir -p ${HOME}/bin
  - mkdir -p ${ANDROID_HOME}/licenses
  - cp core/script/android-sdk-license ${ANDROID_HOME}/licenses
  - cp /usr/share/libtool/config/config.* core/imports/sqlcipher
  - wget https://dl.google.com/android/repository/android-ndk-r13b-linux-x86_64.zip
  - unzip -q android-ndk-r13b-linux-x86_64.zip -d ${HOME}
  - export ANDROID_NDK_HOME=${HOME}/android-ndk-r13b
  - openssl aes-256-cbc -k $ENCRYPTION_PASSWORD -in LTerminal/LTerminal-android/LTerminal_Distribution.keystore.enc -d -a -out LTerminal/LTerminal-android/LTerminal_Distribution.keystore

script:
  - mkdir linux && cd linux
  - CC=gcc-4.8 CXX=g++-4.8 cmake -DCMAKE_TOOLCHAIN_FILE=../core/CMake/LinuxToolchain.cmake -DLFL_CPP11=1 ..
  - make flatc
  - cp core/imports/flatbuffers/flatc ${HOME}/bin
  - cd ../LTerminal/LTerminal-android
  - ./gradlew assembleRelease

after_success:
  - echo "success"

after_failure:
  - echo "failure"
  - cat /home/travis/build/LucidFusionLabs/LTerminal-android/LTerminal/LTerminal-android/.externalNativeBuild/cmake/release/armeabi-v7a/core/imports/sqlcipher/src/sqlcipher-stamp/*
  - cat /home/travis/build/LucidFusionLabs/LTerminal-android/LTerminal/LTerminal-android/.externalNativeBuild/cmake/release/armeabi-v7a/core/imports/sqlcipher/src/sqlcipher-build/config.log

env:
  global:
  - secure: GVk8dfsqyMi+V64Qi8m3SC1XqWVlu7a9chBICKvVzM2p5U6ItNCyFGheTsQG5qZZCFYVA4ThlBVvAbDgz8t1s2WMaPK0px2vZC+tkQ5PzV1yrtopFDm5yEwXBwEyz2Ljdmy6uHnGzPNW0sAzxlNy7FKJLIr5M2AXMHq8By3P8TFcZBvMxvLsNjTJpKUqSzYF8tb3jZUL3Y+wyEt+8GrC7ip45AHSV15bLEWHbMRbMgML4BC0FOBC0XqUnYPCcSGItkDkjdWta7E94fQUHmSqgs8RDBL7mrEppVH6jaaXUE7d9+mj9Tb8PShI7AYzjp+jwhwSsUgU/f5G0R3Zbms010ANOrfMMynibuIRRaUVAQsYQlU0lFRBTPKNd9ox9OJv6PTZ2bKX8zjAvavaUcNT6yenOweNV2PG2pduPcz1V2tN5zoItiKkhUCUEJHmGOzEFPGDls8RS/vTZDf9tCkplgE5hrhWO6uTD6de189p5oE7fKy2UZE8j9X8YKzIxxdAiWZrmRyO+KQwUfW+fdQ69YwqAG5R79fovWuDU+GHSA0xoZn9rgH7qD96NMQ9u9e2CnpTzDsxyreqEESQpjzbEk4mkMM7ywvcPRNRv0UA07eTfKXMFlupK/RsTYspYtJB+O9gVaswuXNfkfMetYFL+6BC/51P9T9kNen4MJd98HE=
  - secure: WR5MOTc76YyYadHHQz/jYIBYhi5N63ZK6USDIwM+vv02mNBP1QUQKnY0o4zQ+J/8plrlRp6u75DWGpc1XdKC7/xvJF2LDhsRrNNl8JSgwFghwCpzjSflvNQ3oOZ2D2heKi8UzCDjXV/x4GqblQZUegUxCJNVLwqpx8evfJOu1pzL9iFbjGLtflc10ncOt/e6qDU141P+inTB72DvkWieY33aEjztQj6/XdVHtmofZ/sr3FTNmx7PIlw4duKk6NAz+8EAQqcXkpcv04n8vAkG8njGrVMmHHxEpIehhqquML0uWOcpPXUiBG6w7PBWqXgR4SaXEFRacUdq77vfLIAx0sgvDHFByAG5C7OeF7omWDm3MO1dX3MrBhQma9wQHZ0EdshVWH5oVRpSxf/bIt4msKssyOtkgY8FrK2eM2fX6W3SsNDqdLwdv9VtBSbGqIzqbkAI9/G1JRxgCNTLEXS7zzFsepPKQiJBtdf/n5xRNEp9d+Zb02HSqHHhU4Sd0EeMzH4m2d+gyaDFnHSzXoMceEb9hYO3yHVxpHNEoEWMHSOIBfKPeCdq7izAbK9LbpLaCNnYYzxui2psdIYWvhKUe4qkC2M4iywD+v8Dg0MiFXwdPtPVyjdZJ05uqk4u0FUedVzjemVBTcx2H2RHfSzYjrrGI4gKS3aVPAONkMZYTv8=
